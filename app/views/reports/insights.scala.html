@(user: String, survey: Survey, result: Option[List[(String, Int)]] = None, questionTexts: Map[String, String] = Map[String, String](), numResponses: Int = 0, questions: Seq[String] = List[String]())
@import helpers.BasicFormHelper._

@main(user, 0) {
  @form_for("/reports/" + survey.surveyId, "survey_form", "class" -> "form-horizontal", "enctype" -> "multipart/form-data" ) { 
	  <h1>Insights</h1>
	  <hr>
	  <div>
	  <div class="pull-left" style="width: 50%">
	  <p class="alert alert-info">Select the questions below to form groups and generate most preferred answer combinations.</p>
	  <ol>
	  @survey.questions.map { question => 
	    @question match {
	      case t: RadioButtons => {
	        <br><input type="checkbox" value="@question.id" name="questions"/> @t.texts(0).text
	      }
	      case t: CheckBoxes => {
	        <br><input type="checkbox" value="@question.id" name="questions"/> @t.texts(0).text
	      }
	      case t: DropDown => {
	        <br><input type="checkbox" value="@question.id" name="questions"/> @t.texts(0).text
	      }
	      case t: RatingScale => {
	      <br><br><b>@t.texts(0).text</b>
		      @t.dimensions.map { d => 
		        <br><input type="checkbox" value="@(question.id + "_" + d.value)" name="questions"/> @d.texts(0).text
		      }
		      <br>
	      }
	      case t: PageBreak => {
	      <hr>
	      }
	      case _ => {

	      }
	    }
	  }
	  </ol>
	  <div class="pull-right"><input type='submit' class='btn btn-info btn-large' value='Generate' /></div>
	  </div>
  }
<div class="pull-right" style="width: 40%">
  @result.map { r =>
  <div class="block">
  	<b>Questions</b>
  	<ol>
    @questions.map { q =>
      <li>@questionTexts.getOrElse(q,q)</li>
    }
    </ol>
  </div>
    @r.map { case (s, i) =>
    <div class="block">
      <br>Count: @i (@(i * 100/ numResponses) %)
      <ol>
      @s.split("-").map { a =>
        @if(a.endsWith("_other")) {
	  	    <li>Other</li>
        } else {
	  	    <li>@questionTexts.getOrElse(a, a)</li>
        }
      }
	    </ol>
    </div>
    }
  }
</div>
</div>
}